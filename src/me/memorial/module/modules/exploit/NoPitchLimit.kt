package me.memorial.module.modules.exploit

import me.memorial.events.EventTarget
import me.memorial.events.impl.misc.PacketEvent
import me.memorial.module.Module
import me.memorial.module.ModuleCategory
import me.memorial.module.ModuleInfo
import me.memorial.value.BoolValue
import net.minecraft.network.play.client.C03PacketPlayer

@ModuleInfo(name = "NoPitchLimit", description = "Allows you to rotate your head indefinitely in every direction..", category = ModuleCategory.EXPLOIT)
class NoPitchLimit : Module() {

    companion object {
        var instance: NoPitchLimit? = null
    }

    init {
        instance = this
    }

    private val serverSideValue = BoolValue("ServerSide", true)

    @EventTarget
    fun onPacket(e: PacketEvent) {
        if (serverSideValue.get())
            return

        val packet = e.packet

        if (packet is C03PacketPlayer) {
            packet.pitch = packet.pitch.coerceAtMost(90F)
            packet.pitch = packet.pitch.coerceAtLeast(-90F)
        }
    }

}