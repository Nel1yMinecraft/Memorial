package me.memorial.module.modules.exploit;

import me.memorial.events.EventTarget;
import me.memorial.events.impl.misc.PacketEvent;
import me.memorial.module.Module;
import me.memorial.module.ModuleCategory;
import me.memorial.module.ModuleInfo;
import me.memorial.value.BoolValue;
import net.minecraft.network.play.client.C03PacketPlayer;

@ModuleInfo(name = "NoPitchLimit", description = "Allows you to rotate your head indefinitely in every direction.", category = ModuleCategory.EXPLOIT)
public class NoPitchLimit extends Module {

    public static NoPitchLimit instance;

    private BoolValue serverSideValue = new BoolValue("ServerSide", true);

    public NoPitchLimit() {
        instance = this;
    }

    @EventTarget
    public void onPacket(PacketEvent event) {
        if (serverSideValue.get()) {
            return;
        }

        if (event.getPacket() instanceof C03PacketPlayer) {
            C03PacketPlayer packet = (C03PacketPlayer) event.getPacket();
            packet.pitch = Math.max(-90F, Math.min(90F, packet.pitch));
        }
    }

}
